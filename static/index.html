<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Presentation</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" />

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  
    
      <script type="text/javascript" src="./js/sh_lang/sh_ruby.min.js"></script>
    
  

  
    <link rel="stylesheet" href="./file/000_sh_vim-dark.css" type="text/css"/>
  
    <link rel="stylesheet" href="./file/styles.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
    <tr><td class="key">P</td><td>toggle pause</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div style="background: url('../pictures/surfpier.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content black" ref="./slides/1">
<h3>Jacob Burkhart</h3>

<p><br/><br/><br/><br/>
<br/><br/><br/><br/>
<br/><br/><br/><br/><br/></p>

<h2>github.com/jacobo/building_services</h2>

<h2>@beanstalksurf</h2>

<p class="notes">Hi there. This is me. I'm Jacob Burkhart. You can tweet at me there or download this presentation.  </p>
</div>
</div><div style="background: url('../pictures/whatamidoing.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/2">
<h3>What do I know?</h3>

<ul>
<li>This is just a story</li>
</ul>

<p class="notes">This is the first time I've given a talk in Israel. It's also the first time I've given a technical talk. Last time I gave a talk at a ruby conference I talked about Surfing. This talk is going to be very different, but there's one key point that remains the same. This is a story of my experiences and what has worked for me. I'm not here to give you instructions on what to do. I only hope to inspire you. Maybe you'll face some problems similar to the ones I'm going to describe. Hopefully sharing my experience will help you to solve them better than I did.</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/3">
<p><br/></p>

<h3>Engine Yard</h3>

<p>(picture of a train in the clouds from J-Bird)</p>

<p class="notes">Engine Yard. This is where I work. Thank you to them for sponsoring this conference and sending me here. And this is what this talk is about. Because at Engine Yard we have a fairly large and complicated product...</p>
</div>
</div><div style="background: url('../diagrams/ey_soa_overview.png') center no-repeat;" class="slide" data-transition="none"><div class="content h3overlaybullet bullets incremental" ref="./slides/4">
<ul>
<li><h3>Service-Oriented Architecture</h3></li>
</ul>

<p class="notes">and it consists of a lot of services.  We DO have the monolithic app syndrome. (that's our cloud dashboard in the middle). But we've been gradually been adding new features. And whenever we do we look for ways they can be added as separate services.  By the way, I colored those 3 boxes because those are the services that I'm going to talk about today.</p>
</div>
</div><div style="background: url('../screenshots/terminal_colors.png') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/5">
<p><br/></p>

<h3>Side Note: Use colors</h3>

<p class="notes">And it can actually help to think of things in terms of colors. This is a typical screenshot of my terminal, the colors help me to remember what I was doing (and on which app).</p>
</div>
</div><div style="background: url('../diagrams/just_addons.png') center no-repeat;" class="slide" data-transition="none"><div class="content bullets rightside-bullets incremental" ref="./slides/6">
<ul>
<li>Minimize additions to Cloud Dashboard</li>
<li>Iterate quickly</li>
<li>Decouple</li>
</ul>

<p class="notes">Back to addons. In the higher level diagram I drew this. So why? Why not just connect our 3rd party services directly to Cloud Dashboard. There are some design goals here.</p>
</div>
</div><div style="background: url('../pictures/distributed_objects.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/7">
<h3>Distributed Objects</h3>

<p class="notes">Let me tell you about distributed objects. This is about relationships that go across systems.</p>
</div>
</div><div style="background: url('../pictures/solowave.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content align-left shadowed" ref="./slides/8">
<h1>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</h1>
</div>
</div><div style="background: url('../diagrams/datamodel_simple.png') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/9">
<p class="notes">this is a simple example of the data model in our case.</p>
</div>
</div><div style="background: url('../diagrams/datamodel.png') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/10">
<p class="notes">this is the diagram I actually created and maintained during development</p>
</div>
</div><div style="background: url('../pictures/pointing.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/11">
<h3>APIs</h3>

<p class="notes">The keyword in API is interface. When I talk about APIs I'm talking about interfaces across systems. But was is a system. When you write a single rails app you don't think about your APIs as much but you do have objects interacting. When your system spans codebases and run on separate machines, you have to formalize your APIS more. But they are there even in a single rails app.</p>
</div>
</div><div style="background: url('../diagrams/just_addons.png') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/12">
<p class="notes">back to the diagram of the 3 systems</p>
</div>
</div><div style="background: url('../diagrams/just_addons_really.png') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/13">
<p class="notes">Here's what it looks like with the cross-app APIs defined. Notice that Addons actually has 2 distinct APIs for public and private, and then each API has two parties. For convenience we call one the server and one the client, but they do more than that.</p>
</div>
</div><div style="background: url('../diagrams/addons_workflow.png') center no-repeat;" class="slide" data-transition="none"><div class="content h3overlaybullet bullets incremental" ref="./slides/14">
<ul>
<li><h3>Where To Start?</h3></li>
</ul>

<p class="notes">here's a workflow of a user using the cloud dashboard to enable a service for their app. This one UI action triggers a chain of calls and responses that create new data in each system.</p>
</div>
</div><div style="background: url('../pictures/complexity.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/15">
<h3>Complexity</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/16">
<h1>Iteration</h1>

<p><img src="./file/./pictures/iteration.png" alt="thing"/>

<ul>
<li>Solve a small subset of one use case.</li>
<li>Gradually add features/complexity.</li>
</ul>

<p class="notes">start with just enable service and assume that we already know about the services etc.. </p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/17">
<h1>Isolation</h1>

<p><img src="./file/./pictures/isolation.png" alt="thing"/>

<ul>
<li>Solve simple problems in isolation</li>
<li>Combine the simple solutions into a complex solution</li>
</ul>

<p class="notes">develop on just one of the 3 parts at time, and use a mock so we can write tests.</p>
</p>
</div>
</div><div style="background: url('../diagrams/addons_workflow.png') center no-repeat;" class="slide" data-transition="none"><div class="content black align-left" ref="./slides/18">
<h2>from this</h2>

<p class="notes">we we'll go from the production use case where everything talks</p>
</div>
</div><div style="background: url('../diagrams/addons_workflow_mock.png') center no-repeat;" class="slide" data-transition="none"><div class="content black align-left" ref="./slides/19">
<h2>to this</h2>

<p class="notes">to using a mock</p>
</div>
</div><div style="background: url('../diagrams/addons_workflow_mock2.png') center no-repeat;" class="slide" data-transition="none"><div class="content black align-left" ref="./slides/20">
<h2>and this</h2>

<p class="notes">to using a mock</p>
</div>
</div><div style="background: url('../diagrams/addons_workflow_mock3.png') center no-repeat;" class="slide" data-transition="none"><div class="content black align-left" ref="./slides/21">
<h2>and also</h2>

<p class="notes">to using a mock</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/22">
<p><br/><br/><br/>
<br/><br/><br/></p>

<h1>Every API Client needs a mocked mode.</h1>

<p class="notes">there are lots of way to actually implement a mocked mode. One of the coolest examples is fog. Shai is going to go into deeper details in his talk later about the different ways you can setup a mocked mode. I just want to introduce the concept.</p>
</div>
</div><div style="background: url('../pictures/wes.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content h2bottomright" ref="./slides/23">
<h3>Wes</h3>

<h2>@geemus</h2>
</div>
</div><div class="slide" data-transition="none"><div class="content marginlessimage" ref="./slides/24">
<p><img src="./file/./pictures/fog.png" alt=""/>

<pre class="sh_ruby"><code>require 'fog'
creds = {provider: 'AWS',
  aws_access_key_id: 'a123',
  aws_secret_access_key: 'b456'}
fog = Fog::Compute.new(creds)
fog.servers</code></pre>

<p/>

<pre class="sh_ruby"><code>Fog.mock!
fog = Fog::Compute.new(creds)
fog.servers
fog.servers.create
fog.servers
fog.servers.first.destroy
fog.servers
fog.servers</code></pre>

<p class="notes">Demo. here's an example of using fog to call AWS web services in test. We ask amazon to boot an instance, and it happens immediately, and fog responds as if it worked, there's even a delay feature.</p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental align-left" ref="./slides/25">
<h1>Approach so far</h1>

<ul>
<li>Distributed Objects</li>
<li>APIs</li>
<li>Isolation</li>
<li>Mock-Mode</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental align-left" ref="./slides/26">
<h1>Let's write some code</h1>

<ul>
<li>Private API client (ey_services_api_internal)</li>
<li>Cloud Dashboard (awsm)</li>
<li>Public API client (ey_services_api)</li>
<li>Fake Service (lisonja)</li>
<li>Add-ons Service (tresfiestas)</li>
</ul>

<p class="notes">This was a reasonable mistake to make. At Engine Yard we always like to ship things to production as early as possible. We hide them behind a feature flag and so it doesn't matter if they are live.  So reasonably I thought to immediately make all of these things.</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/27">
<h1>Side Note: Bundler Path</h1>

<pre class="sh_ruby"><code>#fetches from rubygems
gem 'ey_services_api'</code></pre>

<p/>

<pre class="sh_ruby"><code>#fetches from github
gem 'ey_services_api', 
  git: 'git@github.com:engineyard/ey_services_api.git'</code></pre>

<p/>

<pre class="sh_ruby"><code>#fetches from local repo
gem 'ey_services_api', path: '../ey_services_api'</code></pre>

<p class="notes">Develop everything locally with bundler path, and you can use bundler git so you don't have to publish your gems while you are still in development</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/28">
<h1>Tests Pass</h1>

<p><img src="./file/./screenshots/green_tests.png" alt=""/>

<p class="notes">so I thought this was great right. I just wrote all this code, but only like 1/5 of it had to be in AWSM (the slow monolith), so for the most part I was writing greenfield code, and my TDD went fast.</p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/29">
<h1>Deploy and...</h1>

<p><img src="./file/./screenshots/500.png" alt=""/>

<p class="notes">so I got all this into production</p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental align-left" ref="./slides/30">
<h1>What went wrong</h1>

<ul>
<li>Working in 5 repositories at once sucks.</li>
<li>No integration tests.</li>
<li>No visibility of interactions in live system.</li>
</ul>
</div>
</div><div style="background: url('../pictures/beachponder.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/31">
<h3>Full integration tests are hard</h3>
</div>
</div><div style="background: url('../pictures/tim.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content h2bottomright" ref="./slides/32">
<h3>Tim</h3>

<h2>@halorgium</h2>

<p class="notes">the term spike generally refers to throwaway code that you write to try out an idea with the goal of figuring out all the questions you didn't know to ask. What will you stumble on. What assumptions can you discover that are wrong before you go too far down a given path.  Usually you don't write tests, or you write very minimal tests.</p>
</div>
</div><div style="background: url('../pictures/tim.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/33">
<p><br/></p>

<h3>That's crazyness.</h3>

<h3>Write a Spike.</h3>
</div>
</div><div style="background: url('../pictures/urchin.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content align-left bullets incremental" ref="./slides/34">
<h3>Spike</h3>

<ul>
<li>Throwaway Code</li>
<li>No Tests</li>
<li>Full Integration</li>
</ul>

<p class="notes">usually, a spike is throwaway code.</p>
</div>
</div><div style="background: url('../pictures/cactus.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/35">
<h3>Spike a Working Demo</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content video" ref="./slides/36">
<p><video controls="controls">
  <source src="/image/recordings/test.mov" type="video/mp4">
</source></video>

<p class="notes">clicking around</p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/37">
<h3>Side Note: Use pow <small>http://pow.cx/</small></h3>

<ul>
<li><code>myapp.dev</code> + <code>otherapp.dev</code> <br/> vs. <br/> <code>localhost:3000</code> + <code>localhost:4000</code></li>
<li><img src="./file/./pictures/logo-pow.png" alt=""/>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/38">
<h3>Side Note: Use <s><div/>pow</s> <small>*.localdev.engineyard.com</small></h3>

<ul>
<li>anything.localdev.engineyard.com:3000 == <br/> localhost:3000</li>
<li><img src="./file/./screenshots/dns.png" alt=""/>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/39">
<h3>Side Note: Use <s><div/>pow</s> <small>*.localdev.engineyard.com</small></h3>

<pre class="sh_ruby"><code># config.ru
CASH_HOST = "http://billing.localdev.engineyard.com:3000/"
AWSM_HOST = "http://awsmmcmonies.localdev.engineyard.com:3000/"
if Rails.env == "development"
  map AWSM_HOST do
    run AwsmMcMonies::Server
  end
  map CASH_HOST do
    run JohnnyCash::Application
  end
else
  run JohnnyCash::Application
end</code></pre>
</div>
</div><div style="background: url('../pictures/sidewayspalm.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/40">
<h3>The Spike becomes an integration test</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/41">
<h1>The Spike becomes an integration test</h1>

<pre class="sh_ruby"><code>#spec_helper.rb
Capybara.app = Rack::Builder.new do
  use RequestVisualizer
  map URL_FOR_TRESFIESTAS do
    run Tresfiestas::Application
  end
  map URL_FOR_AWSM do
    run FakeAWSM::Application
  end
  map URL_FOR_LISONJA do
    run Lisonja::Application
  end
end
Artifice.activate_with(Capybara.app)</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/42">
<h1>The Spike becomes an integration test</h1>

<pre class="sh_ruby"><code>#enable_spec.rb
visit URL_FOR_AWSM
click_link "signup!"
fill_in "Name", with: "acme-corp-trial"

FakeAWSM::Account.where(
  name: "acme-corp-trial").should_not be_empty

click_button "Create Account"
click_link "Services"
click_button "Enable Lisonja"</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/43">
<h1><code>use RequestVisualizer</code></h1>

<div style="height: 600px; width:1000px; overflow:auto">
  <img src="/image/screenshots/request_visualizer.png"/>
</div>

<p class="notes">So we went through all these various use cases with this basic framework of what I called the spike. But development could be easier. A big problem was that I was pairing and it was hard to make my pair understand everything that was going on, because my only tests were too high level. so I wrote this little middleware that let me see a trace of the API traffic</p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/44">
<h3>Side Note: Use artifice</h3>

<pre class="sh_ruby"><code>require 'net/http'
Net::HTTP.get_print(URI.parse('http://google.com'))</code></pre>

<p/>

<pre class="sh_ruby"><code>require 'artifice'
miniapp = lambda{|_| [200, {}, ['Hello']]}
Artifice.activate_with(miniapp)
Net::HTTP.get_print(URI.parse('http://google.com'))
Artifice.deactivate</code></pre>

<ul>
<li><br/><code>Artifice.activate_with(Capybara.app)</code></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/45">
<h3>Side Note: Use <s><div/>artifice</s> rack-client</h3>

<pre class="sh_ruby"><code>require 'rack/client'
client = Rack::Client.new
client.get('http://google.com', {}).body</code></pre>

<p/>

<pre class="sh_ruby"><code>miniapp = lambda{|_| [200, {}, ['Hello']]}
client = Rack::Client.new{ run miniapp }
client.get('http://google.com', {}).body</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/46">
<h3>Side Note: Use <s><div/>artifice</s> rack-client</h3>

<pre class="sh_ruby"><code>#spec_helper.rb
Capybara.app = Rack::Builder.app do
  map CASH_HOST do
    run JohnnyCash::Application
  end
  map AWSM_HOST do
    run AwsmMcMonies::Server
  end
  map "https://apisandbox.zuora.com/" do
    run Rack::Client::Handler::NetHTTP
  end
end
JohnnyCashApi::Client.mock!(Capybara.app)</code></pre>
</div>
</div><div style="background: url('../pictures/boards.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/47">
<h3>Many Integration tests are written</h3>
</div>
</div><div style="background: url('../pictures/drivingit.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/48">
<h3>Integration tests <br/> drive "real" code</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/49">
<h3>Testable Mocks</h3>

<pre class="sh_ruby"><code># ey_services_api/spec/spec_helpers.rb
if ENV["BUNDLE_GEMFILE"] == "EYIntegratedGemfile"
  require 'tresfiestas'
  EY::ServicesAPI.enable_mock!(
    Tresfiestas::Application)
else
  require 'ey_services_fake'
  EY::ServicesAPI.enable_mock!(
    EyServicesFake::TresfiestasFake)
end</code></pre>

<p class="notes">there are different approaches to doing this... In my case I wrote tests in my API client that could run against either the "mock" server OR the "real" server. I used 2 gemfiles and the "internal" one actually includes the full Addons project as a gem.</p>
</div>
</div><div style="background: url('../pictures/roots.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/50">
<h3>In reality the process was not so linear</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="./slides/51">
<h3>To Review</h3>

<ul>
<li>Distributed Objects</li>
<li>Well defined APIs</li>
<li>Integration Tests</li>
<li>Verified Mock-Mode</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/52">
<h1>Time to ship!</h1>

<p><img src="./file/./pictures/shipit.png" alt=""/>

<p class="notes">this is what I tried to do originally, but I needed to heed the other lessons first. With verifiable API clients and mock modes I could work in a single repository at a time, and be confident that if my tests pass, things will work when I deploy to production.</p>
</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/53">
<h3>Side Note: Use Feature Flags</h3>

<pre class="sh_ruby"><code>class Account &lt; ActiveRecord::Base
  has_many :account_features
  has_many :features, :through =&gt; :account_features

  def has_feature?(name)
    features.where(name: name).any?
  end
end</code></pre>

<p/>

<pre class="sh_ruby"><code>- if @account.has_feature?('addons')
  = link_to Addons, account_addons_url(@account)</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/54">
<h1>Document your APIs</h1>

<p class="notes">documentation has a price (just like code) the more you write, the more you need to maintain</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/55">
<h1>Share your errors</h1>

<p class="notes">we actually show partners a debug console with exception traces for recent errors.</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/56">
<h1>Your domain model should not match your database model</h1>

<p class="notes">because at some point you'll probably want to change one without changing the other
.notes because your API client doesn't need to know everything</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/57">
<h1>The best identifier is a URL</h1>

<p class="notes">because then you don't need to construct URLs
.notes REST (and thus usefulness) will likely fall out.
.notes example of the URL you get identifying an account, you can GET to for the information again.
.notes the URL to POST to register a service is also a listing of services you've registered</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/58">
<h1>Involve your designers early</h1>

<p class="notes">when your API is the backend for a web interface, changes to what the designers what to show on what screen, will dictate changes to what your various API endpoints need to return</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/59">
<h1>One piece of data should have 1 authority</h1>

<p class="notes">delegate to that authority when you need that information</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="./slides/60">
<h1>Follow conventions. Break conventions. Establish conventions.</h1>

<p class="notes">a of conventions I followed turned out to be mistakes: to_json, isolation testing. But I needed to build new conventions in their place: presenter, mock mode orchestrator.
.notes we use HMAC for auth on all our services, all of the TF data is represented with model name to model attributes, with URLS outside the inner hash. Everything is JSON post body and JSON response.</p>
</div>
</div><div style="background: url('../pictures/boardsonthebeach.jpg') center no-repeat;" class="slide" data-transition="none"><div class="content" ref="./slides/61">
<h3>Questions?</h3>

<p><br/><br/><br/><br/>
<br/><br/><br/><br/>
<br/><br/><br/><br/><br/></p>

<h2>github.com/jacobo/building_services</h2>

<h2>@beanstalksurf</h2>
</div>
</div></div>
<div id="pauseScreen">
  
</div>

</body>
</html>
